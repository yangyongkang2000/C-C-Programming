# 简易英汉词典控制台程序


## 简要介绍

+ 为什么我写这个程序

不是为了所谓的大作业，而是最近实际上需要一个类似英语生词本的程序，那我为什么不用手机上的对应App？这个你懂得，你要知道你是想达到你的学习英语效率而去用这个App,而不是用这个App来提高你的学习英语效率，而事实上大部分手机上的App内置广告和手机的一些其他App通知消息，会干扰你，最后并没有满足你实际上的需求。
而电脑上的词典，实际上Mac自带的字典很好用并且很强大，但是有些功能比如生词这个功能就没有，所以我自己就额外写了一个简单程序，虽然它没有Qt之类搭建的UI,但它足够简单，启动查询足够快，简单控制台命令行就可以满足我的功能需求，让程序回到了功能本身，是去提高你的学习效率，而不是让你感到赏心悦目。

+ 编程语言选择

我选择的语言还是我相对"熟悉"的C++，使用的标准是C++17。你会看到C++的强大。

+ 面向对象？

我实在不知道如何用面向对象去完成它，面向过程，函数编程，Template编程不香吗？


+ 我写这个程序时用到的工具

 我用的MacBookPro2017 MacOS 12下用Xcode13.1开发。


+ 软件版本
>~~目前最新版本是2.5.9,目前最新版本2.6.3，重写了一些io函数，读取文本更快，使得程序启动速度更快，性能提升了两倍，所以几乎感受不到启动延迟。~~
> ~~目前最新版本2.6.3，完善了在Windows上的体验，优化了代码，在Visual Studio 2022 上 0 Warning 0 Error 完美编译成功。~~

> 目前最新版本2.7.5，最大的一次版本更新，修正了Bug，进行了代码重构，提升了稳定性。增加了新功能。

+ 新功能介绍
> 因为下面的演示操作没有展示新功能，但新增加的功能使得字典更加方便，这里介绍一下。

```
HELLO WELLCOME VOCABULARY
Version:2.7.5
Copyright@2021 Yang Yongkang. All rights reserved.
>>> 
```
当输入类似[...]这类命令，[...]中的...可以与终端命令和字典功能进行交互。

>当输入[exit] 代表退出程序

>当输入[new] 代表展示生词本中的新增加单词

>当输入[test] 进行单词测试


>当输入[...] 其他时，对[...]中的...调用终端命令执行，比如输入[clear]，相当于终端调用clear命令，Unix下clear就是清屏操作。

## 运行前的编译工作

+ 程序运行环境 
>  ~~应该跨平台。虽然我只在自己MacBook Pro 2017 上用Apple Clang,GNU GCC 通过了测试，但是由于我写的基本按照C++17标准来，所以只需要一个支持C++17完整标准的编译器就够了，操作系统环境就可以实现跨平台。但本文档主要介绍类Unix下操作。当然Windows下也类似。~~

> MacOS/Linux

> Windows


~~目前我在macOS和Ubuntu下通过了测试。~~

macOS Ubuntu Windows 下都通过测试，正常编译运行

> 其中 感谢**家玮**在WIndows10下VS19的测试和QQ昵称**看那天行健君子以自强不息** Ubuntu 20.04的测试

> 其中Windows系统上，我用Microsoft最新推出的Visual Studio 2022，成功编译并运行，并打包成文件Dictionary.zip，大家就不需要重新编译，直接解压文件之后打开Dictionary.exe运行。

+ 如何编译或者运行程序

> Linux/OS X 直接make既可以。


> ~~windows也很简单,VS19新建工程即可。~~
解压Dictionary.zip，打开Dictionary.exe运行。


## 开始运行

+ 启动程序

在控制台或者终端上进入程序所在文件目录，然后输入
```
./Dictionary
```

> ~~当你在终端上，没进入所在文件目录的情况下，直接运行，会报错，因为会显示没发现词典，因为词典是在特定目录（即程序所在目录下的），这怎么办？\
程序后面接一个字典文件所在目录就行，类似、
.../Dictionary  [...](文件目录) ~~
当然你也可以写个脚本去解决。或者在初次make下确定当前文件夹。有机会我会去完善这个问题。~~


在类Unix系统上，你可以在任何地方打开程序。当然也可以建立一个链接引用程序文件。

+ 开始玩耍
 
 为了尽快熟练这个软件，可以照着下面流程熟悉软件操作。以下操作是连续的。


 启动程序后，界面是这样的
```
HELLO WELLCOME VOCABULARY
Version:2.4.4
Copyright©2021 Yang Yongkang. All rights reserved.
>>> 

```

直接输入单词，例如我输入
```
apple
```
会弹出来
```
>>> apple 
selsect:[1]search [2]add [3]remove [4]test [5]exit 
choice:
```

有三个选择，也就是说有三个功能,针对对你输入1,2,3，我分别介绍(还是以Apple为例)

[i] 输入1或者回车键，也就是搜索功能，此时会显示
```
>>> apple
selsect:[1]search [2]add [3]remove [4]test [5]exit
choice:1
[0]: apple n.苹果, 似苹果的果实
```


当然也支持模糊搜索，也就是不需要拼接所有单词，比如你这样
```
>>> appl
select:[1]search [4]test [5]exit
choice:1

[0]: applanation none.扁平, 变平作用

[1]: applaud none.叫好, 拍手喝采, 鼓掌 v.拍手喝彩, 称赞, 赞同

[2]: appetizing none.开胃, 香, 香喷喷 adj.美味可口的, 促进食欲的

[3]: applause none.喝彩, 赞许, 掌声 n.鼓掌欢迎, 欢呼

[4]: appetizer n.开胃食品, 开胃物

[5]: appetitive adj.食欲的, 有食欲的, 促进食欲的

[6]: applausive adj.拍手欢呼的

[7]: applausively adv.喝采地

[8]: appetite none.饭量, 食量 n.食欲, 胃口, 欲望, 爱好

[9]: appetising adj.美味可口的, 促进食欲的

```

会显示所有可能的结果。还有你注意到输出的每个单词前面的[数字]代表什么意思吗？ [数字]中的数字起着单词索引的作用，就是用数字指代了这个单词，等待下次输入的时候可以不用再输入整个单词，只需用数字去指代这个单词。比如下次输入的时候，我输入8，就是相当于输入appetite,然后选择[1]search,此时终端显示

```
>>> 8
selsect:[1]search [2]add [3]remove [4]test [5]exit
choice:1

[0]: appetite none.饭量, 食量 n.食欲, 胃口, 欲望, 爱好
```


当然也支持中文输入，比如输入苹果
```
>>> 苹果
select:[1]search [4]test [5]exit
choice:1

[0]: apple n.苹果, 似苹果的果实

[1]: apple-pie none.完美无缺 n.苹果饼

[2]: applebutter none.苹果酱

[3]: applecart n.苹果车

[4]: applejack n.苹果白兰地

[5]: applesauce none.器具 n.苹果酱, 胡说

[6]: applewood n.苹果木

[7]: calvados n.苹果白兰地酒

[8]: cider none.苹果汁 n.苹果酒

[9]: cider-cup n.苹果酒的一种

[10]: cyder n.苹果酒, 苹果汁

[11]: dimalate none.苹果酸氢盐

[12]: scrumpy n.苹果烈酒

[13]: sweeting n.苹果的一种, 情人

[14]: toffee-apple n.苹果棒糖

[15]: scrumpy n.苹果烈酒

[16]: sweeting n.苹果的一种, 情人

[17]: toffee-apple n.苹果棒糖
```

同理你也可以用每个单词前面[数字]中的数字指代。

我们再来探索添加单词功能。
讲这个之前，我们先讲讲一些小现象。
注意到没有，有时候你输入一个单词和中文，按下回车符后，终端有时候显示


```
selsect:[1]search [2]add [3]remove [4]test [5]exit
```

有时候显示
```
select:[1]search [4]test [5]exit
```

这是为什么？
只有当你输入的是英文单词而且单词完整正确且在词典中存在，才会显示

```
selsect:[1]search [2]add [3]remove [4]test [5]exit
```

会多出2，3功能，因为增添和移除操作，要确保操作的英文单词是在字典中存在的。

当输入中文查找单词的时候只是帮你为下次输入正确英文单词做铺垫，所以还是会显示


```
select:[1]search [4]test [5]exit
```

好了，我们开始讲如何把单词添加到生词本
紧接着上面的操作，输入0，指代Apple，然后选择2，此时你输入对应的单词的中文解释，你可以输入字典对应单词中没有的中文解释，但不允许在生词本中出现字典没有的英文单词，你可以输入多个解释，中间用空格隔开。比如
```
>>> 0
selsect:[1]search [2]add [3]remove [4]test [5]exit
choice:2

>>> 苹果 苹果公司
```

然后我们讨论移除功能。注意到还是输入0去指代apple，那问题来了，怎么知道数字能代表单词？我来回答你：在上次（不是上上次）搜索结果出现的单词索引中出现的数字，这个数字就代表这个单词，如果没出现，你输入数字就不会替换成对应的单词。

当输入0后会发现，如果输出
```
apple [0]
苹果 [1]
苹果公司 [2]

>>>
```
类似的，代表生词本中存在这个单词，同样后面[数字]中的数字同样起着索引的作用，输入这个数字代表删除这个意思，但注意当你输入0时，整个单词和它的意思全部删除。

如果生词本中不存在这个单词
会直接输出
```
>>>
```
等待属于下一个单词或者中文。




程序运行流程界面
```
>>> 0
selsect:[1]search [2]add [3]remove [4]test [5]exit
choice:3

apple [0]
苹果 [1]
苹果公司 [2]

>>> 1
>>> 14
selsect:[1]search [2]add [3]remove [4]test [5]exit
choice:3

>>> 
```


然后是test功能，对生词本中的单词进行测试，随机测试10个单词，如果生词本不足十个单词，则随机测试里面的所有单词。先随机输入一个字符然后选择test功能，即可进入测试

运行界面

```
>>> 1
selsect:[1]search [2]add [3]remove [4]test [5]exit
choice:4

Question:apple 苹果
Answer:apple 苹果公司 
Correct Rate:0%

Grade:0
```

最后退出程序，类似测试程序，先随机输入一个字符然后选择exit功能，即可退出程序。


```
>>> 1
selsect:[1]search [2]add [3]remove [4]test [5]exit
choice:5

New Words:
apple 苹果公司 
Number of new words:1
```

推出过程中会显示你生词本中新记的单词。




## 问题回答及情况说明

+ 字典中有多少个单词？

收录了差不多180000个单词。

+ 搜索操作是如何进行的？

> 当输入的是中文的时候，输出匹配中文解释前缀的所有单词，比如输入足球

```
>>> 足球
select:[1]search [4]test [5]exit
choice:1

[0]: FA abbr.足球协会 

[1]: football none.足坛 n.足球, 橄榄球

[2]: footballer n.足球员, 足球选手

[3]: gridder n.足球选手, 橄榄球运动员

[4]: pediococcus n.足球菌, 小球菌

[5]: pools n.足球场

[6]: soccerballleather none.足球革
```

```
>>> 美式
select:[1]search [4]test [5]exit
choice:1

[0]: arenaball n.美式室内橄榄球

[1]: soccer none.美式足球 n.英式足球

```
感受一下不同。


> 输入英文的单词搜索是基于输入的单词在有序单词表中按序完美插入的相对位置，基于二分查找，当不存在时输出相邻的10个（如果有这么多）单词，并没有引入相似度这种计算。输入英文单词进行搜索，对大小写不敏感，但输出到生词本和终端是原生显示在字典中的。


## 注意事项

+ 搜索是基于字典数据进行的，添加删除测试是基于生词本数据进行的。

> ~~按退出操作完整退出程序才能将更新的生词本的数据写到磁盘，否则如果程序中断，则添加删除到生词本的数据不会更新，大家可能有点不满意这个情况，但目前版本就这个情况，后续有机会，我会进行改进。~~ 现在已经改进，突然中断也能保存数据。

## 写到最后
> 还有很多... 需要大家去总结反馈给我。一些程序Bug及功能建议欢迎在[Gitee](https://gitee.com/yang-yongkang-2000/C-Programming/tree/master/vocabulary) 向我提出来。我会非常感激